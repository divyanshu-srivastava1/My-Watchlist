(this.webpackJsonpmovie=this.webpackJsonpmovie||[]).push([[0],{16:function(e,t,s){},18:function(e,t,s){"use strict";s.r(t);var a=s(1),r=s.n(a),n=s(9),i=s.n(n),c=s(6),o=s(10),l=(s(16),s(2)),u=s(3),h=s(5),v=s(4),d="ADD_MOVIES",j="ADD_FAVOURITE",p="REMOVE_FAVOURITE",b="SET_SHOW_FAVOURITE",O="ADD_SEARCH_RESULT",f="ADD_TO_MOVIES",m="CLEAR_SEARCH",g="ADD_LOCAL_STORAGE";function S(e){return{type:j,movie:e}}function x(e){return{type:p,movie:e}}function N(e){return{type:b,val:e}}function y(e){var t="https://www.omdbapi.com/?apikey=1e7d10fb&t=".concat(e);return function(e){fetch(t).then((function(e){return e.json()})).then((function(t){e(function(e){return{type:O,movies:e}}(t))}))}}var A=s(0),C=function(e){Object(h.a)(s,e);var t=Object(v.a)(s);function s(){var e;return Object(l.a)(this,s),(e=t.call(this)).handleChange=function(t){e.setState({searchString:t.target.value})},e.handleSearch=function(){e.props.store.dispatch(y(e.state.searchString))},e.handleAddtoMovies=function(){var t;e.props.store.dispatch((t=e.props.store.getState().addSearchResult.result,{type:f,movie:t})),e.props.store.dispatch({type:m})},e.handleEnter=function(t){"Enter"===t.code&&(console.log(t.code),e.handleSearch())},e.state={searchString:""},e}return Object(u.a)(s,[{key:"render",value:function(){var e=this.props.store.getState().addSearchResult,t=e.result,s=e.showResult;return Object(A.jsxs)("div",{className:"nav",children:[Object(A.jsxs)("div",{className:"search-container",children:[Object(A.jsx)("input",{onChange:this.handleChange,onKeyDown:this.handleEnter}),Object(A.jsx)("button",{className:"search-btn",onClick:this.handleSearch,children:"Search"})]}),s&&Object(A.jsx)("div",{className:"search-results",children:Object(A.jsxs)("div",{className:"search-result",children:[Object(A.jsx)("img",{src:t.Poster,alt:"search-pic"}),Object(A.jsxs)("div",{className:"movie-info",children:[Object(A.jsx)("span",{children:t.Title}),Object(A.jsx)("button",{onClick:this.handleAddtoMovies,children:"Add to movies"})]})]})})]})}}]),s}(r.a.Component),E=function(e){Object(h.a)(s,e);var t=Object(v.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).handleFavourite=function(t){(0,e.props.dispatch)(S(t)),localStorage.setItem("state",JSON.stringify(e.props.store.getState().movies))},e.handleUnfavourite=function(t){(0,e.props.dispatch)(x(t)),localStorage.setItem("state",JSON.stringify(e.props.store.getState().movies))},e}return Object(u.a)(s,[{key:"render",value:function(){var e=this,t=this.props,s=t.movie,a=t.isFavourite;return Object(A.jsxs)("div",{className:"movie-card",children:[Object(A.jsx)("div",{className:"left",children:Object(A.jsx)("img",{alt:"movie-poster",src:s.Poster})}),Object(A.jsxs)("div",{className:"right",children:[Object(A.jsxs)("div",{className:"title",children:[s.Title," ",Object(A.jsxs)("span",{style:{fontWeight:"normal",fontStyle:"italic"},children:["(",s.Year,")"]})]}),Object(A.jsx)("div",{className:"plot",children:s.Plot}),Object(A.jsxs)("div",{className:"footer",children:[Object(A.jsx)("div",{className:"rating",children:s.imdbRating}),a?Object(A.jsx)("button",{className:"unfavourite-btn",onClick:function(){return e.handleUnfavourite(s)},children:"Unfavourite"}):Object(A.jsx)("button",{className:"favourite-btn",onClick:function(){return e.handleFavourite(s)},children:"Favourite"})]})]})]})}}]),s}(r.a.Component),w=function(e){Object(h.a)(s,e);var t=Object(v.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).isFavourite=function(t){return-1!=e.props.store.getState().movies.favourites.indexOf(t)},e.handleChangeTab=function(t){e.props.store.dispatch(N(t))},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.store.subscribe((function(){console.log("UPDATED"),e.forceUpdate()})),null!==JSON.parse(localStorage.getItem("state"))&&this.props.store.dispatch({type:g})}},{key:"render",value:function(){var e=this,t=this.props.store.getState().movies,s=t.list,a=t.favourites,r=t.showFavourite,n=r?a:s;return Object(A.jsxs)("div",{className:"movie-app",children:[Object(A.jsx)(C,{store:this.props.store}),Object(A.jsxs)("div",{className:"main",children:[Object(A.jsxs)("div",{className:"tabs",children:[Object(A.jsx)("div",{className:"tab ".concat(r?"":"active-tabs"),onClick:function(){return e.handleChangeTab(!1)},children:"Movies"}),Object(A.jsx)("div",{className:"tab ".concat(r?"active-tabs":""),onClick:function(){return e.handleChangeTab(!0)},children:"Favourites"})]}),Object(A.jsx)("div",{className:"list",children:n.map((function(t,s){return Object(A.jsx)(E,{movie:t,dispatch:e.props.store.dispatch,isFavourite:e.isFavourite(t),store:e.props.store},s)}))}),0===n.length?Object(A.jsx)("div",{className:"no-movies",children:"No Movies to display !!"}):""]})]})}}]),s}(r.a.Component),R=s(11),F=s(7),T={list:[],favourites:[],showFavourite:!1};var D={result:{},showResult:!1};var k=Object(c.b)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return e=Object(F.a)(Object(F.a)({},e),{},{list:t.movies});case j:return Object(F.a)(Object(F.a)({},e),{},{favourites:[t.movie].concat(Object(R.a)(e.favourites))});case p:var s=e.favourites.indexOf(t.movie);return e.favourites.splice(s,1),e;case b:return e.showFavourite=t.val,e;case f:var a=!0;return e.list.forEach((function(e){e.Title===t.movie.Title&&(a=!1)})),a&&e.list.push(t.movie),localStorage.setItem("state",JSON.stringify(e)),e;case g:return(e=JSON.parse(localStorage.getItem("state"))).showFavourite=!1,e;default:return e}},addSearchResult:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return e.showResult=!0,e.result=t.movies,e;case m:return e.showResult=!1,e.result=[],e;default:return e}}}),_=Object(c.c)(k,Object(c.a)(o.a));i.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(w,{store:_})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.cb872909.chunk.js.map